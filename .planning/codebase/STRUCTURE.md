# Codebase Structure

**Analysis Date:** 2026-01-30

## Directory Layout

```
[project-root]/
├── analysis/                 # Core analysis scripts and utilities
│   ├── __init__.py         # Package initialization and exports
│   ├── config.py           # Configuration constants and settings
│   ├── utils.py            # Shared utilities and data loading functions
│   ├── data_quality.py     # Data validation and quality assessment
│   ├── temporal_analysis.py # Time-based pattern analysis
│   ├── categorical_analysis.py # Crime type and category analysis
│   ├── spatial_analysis.py # Geographic and coordinate analysis
│   ├── cross_analysis.py   # Cross-dimensional analysis
│   ├── weighted_severity_analysis.py # District-level severity scoring
│   ├── 06_generate_report.py      # Comprehensive report generator
│   ├── 07_report_safety_trend.py   # Safety trend focused report
│   ├── 08_report_summer_spike.py   # Summer spike focused report
│   ├── 09_report_red_zones.py      # Hotspot detection report
│   ├── 10_report_covid_lockdown.py # COVID impact report
│   ├── 11_report_robbery_timing.py # Robbery timing report
│   └── [other analysis files]
├── data/                   # Dataset storage
│   ├── crime_incidents_combined.parquet  # Main dataset (~3.5M records)
│   ├── processed/          # Processed data files
│   └── raw/               # Raw input data
├── reports/                # Generated markdown reports
│   ├── 01_eda_report.md              # Comprehensive EDA
│   ├── 02_safety_trend_report.md     # Safety trend analysis
│   ├── 03_summer_spike_report.md    # Summer crime patterns
│   ├── 04_covid_lockdown_report.md   # COVID impact
│   ├── 05_red_zones_report.md       # Hotspot analysis
│   ├── 06_robbery_timing_report.md   # Robbery timing
│   └── final_weighted_severity_summary.md
│   ├── [HTML visualizations]        # Interactive maps and charts
├── .venv/                  # Python virtual environment
├── .git/                   # Git repository
├── .gitignore              # Git ignore rules
└── CLAUDE.md               # Developer documentation and commands
```

## Directory Purposes

**`analysis/`**:
- Purpose: Core analysis logic, configuration, utilities, and report generation
- Contains: Analysis modules, utility functions, configuration constants
- Key files: `config.py` (settings), `utils.py` (shared functions), `temporal_analysis.py` (time analysis)

**`data/`**:
- Purpose: Dataset storage and processing
- Contains: Main parquet dataset, processed subsets, raw inputs
- Key files: `crime_incidents_combined.parquet` (3.5M+ records 2006-2026)

**`reports/`**:
- Purpose: Generated analysis reports and visualizations
- Contains: Markdown reports with embedded plots, HTML visualizations
- Key files: Sequential numbered reports for different analysis focuses

**`.venv/`**:
- Purpose: Python virtual environment with dependencies
- Contains: pip packages, Python executables
- Generated by: `pip install -r [requirements]`

## Key File Locations

**Entry Points:**
- `[analysis/06_generate_report.py]`: Comprehensive EDA report generator
- `[analysis/temporal_analysis.py]`: Time pattern analysis
- `[analysis/spatial_analysis.py]`: Geographic analysis
- `[analysis/07_report_safety_trend.py]`: Focused safety trend report

**Configuration:**
- `[analysis/config.py]`: Paths, figure sizes, colors, DBSCAN params
- `[CLAUDE.md]`: Project overview and development commands

**Core Logic:**
- `[analysis/utils.py]`: Data loading, validation, helper functions
- `[analysis/categorical_analysis.py]`: Crime type categorization
- `[analysis/weighted_severity_analysis.py]`: Severity scoring system

**Testing:**
- Individual analysis modules can be executed directly for validation

## Naming Conventions

**Files:**
- Analysis modules: `[category]_analysis.py` (e.g., `temporal_analysis.py`)
- Report generators: `[number]_report_[topic].py` (e.g., `07_report_safety_trend.py`)
- Utilities: `utils.py`
- Configuration: `config.py`

**Functions:**
- Analysis functions: `analyze_*()` (e.g., `analyze_temporal_patterns()`)
- Data functions: `load_*()`, `validate_*()`, `extract_*()`
- Helper functions: `format_*()`, `create_*()`, `calculate_*()`

**Variables:**
- Constants: UPPER_SNAKE_CASE (e.g., `PROJECT_ROOT`)
- DataFrames: `df`
- Count variables: `count`, `n_`
- Configuration dictionaries: SNAKE_CASE with underscores

## Where to Add New Code

**New Analysis Module:**
- Primary code: Add `analysis/[topic]_analysis.py`
- Follow pattern: Import utils/config, load/validate data, return results dict
- Register: Add function call to comprehensive report if needed

**New Report Generator:**
- Implementation: Add `analysis/[number]_report_[topic].py`
- Pattern: Import relevant analysis functions, orchestrate results
- Update CLAUDE.md with new command

**New Analysis Topic:**
- Core logic: Add to `analysis/` with descriptive name
- Dependencies: Update `requirements.txt` if needed
- Utilities: Add to `utils.py` if widely reusable

**Configuration Updates:**
- Settings: Modify `analysis/config.py`
- Colors/Sizes: Update `COLORS` and `FIGURE_SIZES` dicts
- Paths: Adjust `PROJECT_ROOT` and related paths

## Special Directories

**`.venv/`**:
- Purpose: Python environment isolation
- Generated: Yes
- Committed: No (should be in .gitignore)

**`data/processed/`**:
- Purpose: Cleaned and processed dataset versions
- Generated: Yes (by analysis pipeline)
- Committed: No (can be regenerated)

**`reports/`**:
- Purpose: Output directory for generated reports
- Generated: Yes
- Committed: Yes (results are valuable outputs)

---

*Structure analysis: 2026-01-30*