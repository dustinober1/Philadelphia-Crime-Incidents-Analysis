/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
  warn(
============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/dustinober/Projects/Crime Incidents Philadelphia
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.12.1, xdist-3.8.0, cov-7.0.0
created: 8/8 workers
8 workers [31 items]

scheduling tests via LoadScheduling

tests/integration/test_phase5_runtime_preset_modes.py::test_runtime_mode_validation_script_passes 
tests/integration/test_local_compose_baseline.py::test_compose_config_has_core_services_and_health_gates 
tests/integration/test_phase2_footprint_runtime.py::test_runtime_budget_validation_script_passes 
tests/integration/test_phase2_footprint_runtime.py::test_docs_cover_budget_tuning_and_validation_scripts 
tests/integration/test_local_compose_baseline.py::test_local_compose_docs_exist_and_reference_one_command_startup 
tests/integration/test_phase3_devx_reliability.py::test_docs_cover_recovery_reset_and_profile_commands 
tests/integration/test_phase3_devx_reliability.py::test_refresh_profile_renders_optional_service 
tests/integration/test_phase4_smoke_check_productization.py::test_startup_docs_follow_start_then_validate_flow 
[gw6] [  3%] PASSED tests/integration/test_phase4_smoke_check_productization.py::test_startup_docs_follow_start_then_validate_flow 
[gw1] [  6%] PASSED tests/integration/test_local_compose_baseline.py::test_local_compose_docs_exist_and_reference_one_command_startup 
[gw5] [  9%] PASSED tests/integration/test_phase3_devx_reliability.py::test_docs_cover_recovery_reset_and_profile_commands 
[gw3] [ 12%] PASSED tests/integration/test_phase2_footprint_runtime.py::test_docs_cover_budget_tuning_and_validation_scripts 
tests/integration/test_phase4_smoke_check_productization.py::test_docs_cover_smoke_check_pass_and_failure_interpretation 
tests/integration/test_phase2_footprint_runtime.py::test_compose_config_has_runtime_budgets_for_core_services 
tests/integration/test_phase3_devx_reliability.py::test_default_compose_config_excludes_optional_profile_services 
tests/integration/test_phase4_smoke_check_productization.py::test_canonical_smoke_check_command_is_documented_in_readme_and_runbook 
[gw5] [ 16%] PASSED tests/integration/test_phase4_smoke_check_productization.py::test_canonical_smoke_check_command_is_documented_in_readme_and_runbook 
[gw6] [ 19%] PASSED tests/integration/test_phase4_smoke_check_productization.py::test_docs_cover_smoke_check_pass_and_failure_interpretation 
tests/integration/test_phase6_preset_regression_guardrails.py::test_runtime_guardrails_script_passes 
tests/integration/test_phase5_runtime_preset_modes.py::test_runtime_preset_env_templates_define_expected_values 
[gw6] [ 22%] PASSED tests/integration/test_phase5_runtime_preset_modes.py::test_runtime_preset_env_templates_define_expected_values 
tests/test_runtime_smart_presets.py::test_recommend_preset_high_performance 
[gw6] [ 25%] PASSED tests/test_runtime_smart_presets.py::test_recommend_preset_high_performance 
tests/test_runtime_smart_presets.py::test_recommend_preset_low_power 
[gw6] [ 29%] PASSED tests/test_runtime_smart_presets.py::test_recommend_preset_low_power 
tests/test_runtime_smart_presets.py::test_recommend_preset_default_when_detection_incomplete 
[gw6] [ 32%] PASSED tests/test_runtime_smart_presets.py::test_recommend_preset_default_when_detection_incomplete 
tests/test_runtime_smart_presets.py::test_detect_platform_name_wsl 
[gw6] [ 35%] PASSED tests/test_runtime_smart_presets.py::test_detect_platform_name_wsl 
tests/test_runtime_smart_presets.py::test_runtime_helper_usage_lists_auto_and_recommend 
[gw6] [ 38%] PASSED tests/test_runtime_smart_presets.py::test_runtime_helper_usage_lists_auto_and_recommend 
tests/test_validate_local_stack.py::test_main_skip_startup_does_not_invoke_compose_up 
[gw6] [ 41%] PASSED tests/test_validate_local_stack.py::test_main_skip_startup_does_not_invoke_compose_up 
tests/test_validate_local_stack.py::test_wait_for_health_fails_when_ok_not_true 
[gw6] [ 45%] PASSED tests/test_validate_local_stack.py::test_wait_for_health_fails_when_ok_not_true 
tests/test_validate_local_stack.py::test_main_fails_when_missing_exports_present 
[gw6] [ 48%] PASSED tests/test_validate_local_stack.py::test_main_fails_when_missing_exports_present 
tests/test_validate_local_stack.py::test_main_fails_when_web_endpoint_unreachable 
[gw6] [ 51%] PASSED tests/test_validate_local_stack.py::test_main_fails_when_web_endpoint_unreachable 
tests/test_validate_local_stack.py::test_parse_args_defaults_remain_documented_contract 
[gw6] [ 54%] PASSED tests/test_validate_local_stack.py::test_parse_args_defaults_remain_documented_contract /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

[gw3] [ 58%] PASSED tests/integration/test_phase3_devx_reliability.py::test_default_compose_config_excludes_optional_profile_services 
[gw4] [ 61%] PASSED tests/integration/test_phase3_devx_reliability.py::test_refresh_profile_renders_optional_service 
[gw0] [ 64%] PASSED tests/integration/test_local_compose_baseline.py::test_compose_config_has_core_services_and_health_gates 
[gw1] [ 67%] PASSED tests/integration/test_phase2_footprint_runtime.py::test_compose_config_has_runtime_budgets_for_core_services 
tests/integration/test_phase6_preset_regression_guardrails.py::test_runtime_guardrails_script_is_canonical_path 
tests/integration/test_phase3_devx_reliability.py::test_profile_validation_script_passes 
tests/integration/test_local_compose_baseline.py::test_env_examples_define_local_compose_contract 
tests/integration/test_phase5_runtime_preset_modes.py::test_docs_and_scripts_document_runtime_mode_workflow 
[gw3] [ 70%] PASSED tests/integration/test_phase6_preset_regression_guardrails.py::test_runtime_guardrails_script_is_canonical_path 
[gw0] [ 74%] PASSED tests/integration/test_local_compose_baseline.py::test_env_examples_define_local_compose_contract 
[gw1] [ 77%] PASSED tests/integration/test_phase5_runtime_preset_modes.py::test_docs_and_scripts_document_runtime_mode_workflow /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")
/Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

[gw2] [ 80%] PASSED tests/integration/test_phase2_footprint_runtime.py::test_runtime_budget_validation_script_passes 
tests/integration/test_phase2_footprint_runtime.py::test_dockerfiles_and_env_contract_include_phase2_optimizations 
[gw2] [ 83%] PASSED tests/integration/test_phase2_footprint_runtime.py::test_dockerfiles_and_env_contract_include_phase2_optimizations /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

[gw4] [ 87%] FAILED tests/integration/test_phase3_devx_reliability.py::test_profile_validation_script_passes /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

[gw7] [ 90%] PASSED tests/integration/test_phase5_runtime_preset_modes.py::test_runtime_mode_validation_script_passes 
tests/integration/test_phase5_runtime_preset_modes.py::test_default_runtime_budget_validation_script_passes 
[gw5] [ 93%] PASSED tests/integration/test_phase6_preset_regression_guardrails.py::test_runtime_guardrails_script_passes 
[gw7] [ 96%] PASSED tests/integration/test_phase5_runtime_preset_modes.py::test_default_runtime_budget_validation_script_passes 
tests/integration/test_phase6_preset_regression_guardrails.py::test_preset_04_traceability_maps_to_phase_6 /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

[gw5] [100%] FAILED tests/integration/test_phase6_preset_regression_guardrails.py::test_preset_04_traceability_maps_to_phase_6 /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.10.7/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")

ERROR: Coverage failure: total of 0.00 is less than fail-under=95.00


==================================== ERRORS ====================================
______ ERROR collecting tests/integration/test_migration_verification.py _______
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/integration/test_migration_verification.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_migration_verification.py:28: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
_________________ ERROR collecting tests/test_api_endpoints.py _________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_api_endpoints.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_api_endpoints.py:3: in <module>
    from fastapi.testclient import TestClient
E   ModuleNotFoundError: No module named 'fastapi'
________________ ERROR collecting tests/test_classification.py _________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_classification.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_classification.py:6: in <module>
    from analysis.utils.classification import CRIME_CATEGORY_MAP, classify_crime_category
E   ModuleNotFoundError: No module named 'analysis'
___________________ ERROR collecting tests/test_cli_chief.py ___________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_cli_chief.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_cli_chief.py:27: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
________________ ERROR collecting tests/test_cli_forecasting.py ________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_cli_forecasting.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_cli_forecasting.py:20: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
__________________ ERROR collecting tests/test_cli_patrol.py ___________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_cli_patrol.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_cli_patrol.py:17: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
__________________ ERROR collecting tests/test_cli_policy.py ___________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_cli_policy.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_cli_policy.py:20: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
_________________ ERROR collecting tests/test_data_loading.py __________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_data_loading.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_data_loading.py:19: in <module>
    from analysis.data import clear_cache, load_crime_data
E   ModuleNotFoundError: No module named 'analysis'
______________ ERROR collecting tests/test_data_preprocessing.py _______________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_data_preprocessing.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_data_preprocessing.py:14: in <module>
    from analysis.data.preprocessing import (
E   ModuleNotFoundError: No module named 'analysis'
________________ ERROR collecting tests/test_data_validation.py ________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_data_validation.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_data_validation.py:18: in <module>
    from analysis.data.validation import (
E   ModuleNotFoundError: No module named 'analysis'
________ ERROR collecting tests/test_integration_output_verification.py ________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_integration_output_verification.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_integration_output_verification.py:30: in <module>
    from analysis.cli.main import app
E   ModuleNotFoundError: No module named 'analysis'
________________ ERROR collecting tests/test_phase2_spatial.py _________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_phase2_spatial.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_phase2_spatial.py:6: in <module>
    from analysis.phase2_config_loader import (
E   ModuleNotFoundError: No module named 'analysis'
________________ ERROR collecting tests/test_pipeline_export.py ________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_pipeline_export.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_pipeline_export.py:7: in <module>
    from pipeline.export_data import app
E   ModuleNotFoundError: No module named 'pipeline'
___________________ ERROR collecting tests/test_temporal.py ____________________
ImportError while importing test module '/Users/dustinober/Projects/Crime Incidents Philadelphia/tests/test_temporal.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_temporal.py:6: in <module>
    from analysis.utils.temporal import extract_temporal_features
E   ModuleNotFoundError: No module named 'analysis'
=================================== FAILURES ===================================
____________________ test_profile_validation_script_passes _____________________
[gw4] darwin -- Python 3.9.6 /Library/Developer/CommandLineTools/usr/bin/python3

    @pytest.mark.integration
    def test_profile_validation_script_passes() -> None:
        if shutil.which("docker") is None:
            pytest.skip("docker is not installed")
    
>       subprocess.run(["./scripts/validate_compose_profiles.sh"], check=True)

tests/integration/test_phase3_devx_reliability.py:53: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

input = None, capture_output = False, timeout = None, check = True
popenargs = (['./scripts/validate_compose_profiles.sh'],), kwargs = {}
process = <Popen: returncode: 127 args: ['./scripts/validate_compose_profiles.sh']>
stdout = None, stderr = None, retcode = 127

    def run(*popenargs,
            input=None, capture_output=False, timeout=None, check=False, **kwargs):
        """Run command with arguments and return a CompletedProcess instance.
    
        The returned instance will have attributes args, returncode, stdout and
        stderr. By default, stdout and stderr are not captured, and those attributes
        will be None. Pass stdout=PIPE and/or stderr=PIPE in order to capture them.
    
        If check is True and the exit code was non-zero, it raises a
        CalledProcessError. The CalledProcessError object will have the return code
        in the returncode attribute, and output & stderr attributes if those streams
        were captured.
    
        If timeout is given, and the process takes too long, a TimeoutExpired
        exception will be raised.
    
        There is an optional argument "input", allowing you to
        pass bytes or a string to the subprocess's stdin.  If you use this argument
        you may not also use the Popen constructor's "stdin" argument, as
        it will be used internally.
    
        By default, all communication is in bytes, and therefore any "input" should
        be bytes, and the stdout and stderr will be bytes. If in text mode, any
        "input" should be a string, and stdout and stderr will be strings decoded
        according to locale encoding, or by "encoding" if set. Text mode is
        triggered by setting any of text, encoding, errors or universal_newlines.
    
        The other arguments are the same as for the Popen constructor.
        """
        if input is not None:
            if kwargs.get('stdin') is not None:
                raise ValueError('stdin and input arguments may not both be used.')
            kwargs['stdin'] = PIPE
    
        if capture_output:
            if kwargs.get('stdout') is not None or kwargs.get('stderr') is not None:
                raise ValueError('stdout and stderr arguments may not be used '
                                 'with capture_output.')
            kwargs['stdout'] = PIPE
            kwargs['stderr'] = PIPE
    
        with Popen(*popenargs, **kwargs) as process:
            try:
                stdout, stderr = process.communicate(input, timeout=timeout)
            except TimeoutExpired as exc:
                process.kill()
                if _mswindows:
                    # Windows accumulates the output in a single blocking
                    # read() call run on child threads, with the timeout
                    # being done in a join() on those threads.  communicate()
                    # _after_ kill() is required to collect that and add it
                    # to the exception.
                    exc.stdout, exc.stderr = process.communicate()
                else:
                    # POSIX _communicate already populated the output so
                    # far into the TimeoutExpired exception.
                    process.wait()
                raise
            except:  # Including KeyboardInterrupt, communicate handled that.
                process.kill()
                # We don't call process.wait() as .__exit__ does that for us.
                raise
            retcode = process.poll()
            if check and retcode:
>               raise CalledProcessError(retcode, process.args,
                                         output=stdout, stderr=stderr)
E               subprocess.CalledProcessError: Command '['./scripts/validate_compose_profiles.sh']' returned non-zero exit status 127.

/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/subprocess.py:528: CalledProcessError
----------------------------- Captured stderr call -----------------------------
./scripts/validate_compose_profiles.sh: line 19: rg: command not found
./scripts/validate_compose_profiles.sh: line 24: rg: command not found
_________________ test_preset_04_traceability_maps_to_phase_6 __________________
[gw5] darwin -- Python 3.9.6 /Library/Developer/CommandLineTools/usr/bin/python3

    def test_preset_04_traceability_maps_to_phase_6() -> None:
        requirements = Path(".planning/REQUIREMENTS.md").read_text(encoding="utf-8")
        roadmap = Path(".planning/ROADMAP.md").read_text(encoding="utf-8")
    
>       assert "| PRESET-04 | Phase 6 |" in requirements
E       AssertionError: assert '| PRESET-04 | Phase 6 |' in '# Requirements: Crime Incidents Philadelphia v1.3 Testing & Cleanup\n\n## Milestone Goal\n\nAchieve 95% test coverage across Python codebase (analysis/, api/, pipeline/, CLI) and remove all unused/deprecated files to establish a clean quality baseline.\n\n## Current State\n\n- **Current coverage:** 16% (225/1408 statements)\n- **Target coverage:** 95%\n- **Coverage gap:** 79 percentage points\n- **Modules requiring tests:** 56 total (42 analysis/ + 11 api/ + 3 pipeline/)\n- **Existing test foundation:** ~40 tests with good fixture infrastructure\n\n## Requirements\n\n### Test Infrastructure (INFRA)\n\n- [ ] **INFRA-01**: Developer can run tests in parallel using pytest-xdist for 4-8x faster test execution\n- [ ] **INFRA-02**: Build system enforces 95% coverage threshold via pyproject.toml fail_under configuration\n- [ ] **INFRA-03**: CI pipeline validates coverage with diff-cover to prevent backsliding on new code\n- [ ] **INFRA-04**: Test suite includes quality criteria requiring meaningful assertions and behavior-focused tests\n\n### Core Module Testing (CORE)\n\n- [ ] **CORE-01**: analysis/models/ modules have comprehensive unit tests covering ML and statistical logic\n- [ ] ...RA-02 | Phase 10 | Pending |\n| INFRA-03 | Phase 10 | Pending |\n| INFRA-04 | Phase 10 | Pending |\n| CORE-01 | Phase 11 | Pending |\n| CORE-02 | Phase 11 | Pending |\n| CORE-03 | Phase 11 | Pending |\n| CORE-04 | Phase 11 | Pending |\n| API-01 | Phase 12 | Pending |\n| API-02 | Phase 12 | Pending |\n| API-03 | Phase 12 | Pending |\n| API-04 | Phase 12 | Pending |\n| CLI-01 | Phase 12 | Pending |\n| CLI-02 | Phase 12 | Pending |\n| CLI-03 | Phase 12 | Pending |\n| CLI-04 | Phase 12 | Pending |\n| PIPE-01 | Phase 13 | Pending |\n| PIPE-02 | Phase 13 | Pending |\n| PIPE-03 | Phase 13 | Pending |\n| SUPP-01 | Phase 13 | Pending |\n| SUPP-02 | Phase 13 | Pending |\n| SUPP-03 | Phase 13 | Pending |\n| SUPP-04 | Phase 13 | Pending |\n| CLEAN-01 | Phase 14 | Pending |\n| CLEAN-02 | Phase 14 | Pending |\n| CLEAN-03 | Phase 14 | Pending |\n| CLEAN-04 | Phase 14 | Pending |\n| CLEAN-05 | Phase 14 | Pending |\n| CLEAN-06 | Phase 14 | Pending |\n| QUAL-01 | Phase 15 | Pending |\n| QUAL-02 | Phase 15 | Pending |\n| QUAL-03 | Phase 15 | Pending |\n\n**Coverage:** 32/32 requirements mapped âœ“\n\n---\n\n*Version: v1.3 Testing & Cleanup*  \n*Created: February 7, 2026*  \n*Total Requirements: 30*\n'

tests/integration/test_phase6_preset_regression_guardrails.py:35: AssertionError
=============================== warnings summary ===============================
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
../../Library/Python/3.9/lib/python/site-packages/coverage/config.py:346
  /Users/dustinober/Library/Python/3.9/lib/python/site-packages/coverage/config.py:346: CoverageWarning: Unrecognized option '[tool.coverage.html] filterwarnings=' in config file pyproject.toml
    warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.9.6-final-0 ________________

Name                                       Stmts   Miss  Cover   Missing
------------------------------------------------------------------------
analysis/artifact_manager.py                  28     28  0.00%   3-121
analysis/cli/chief.py                        164    164  0.00%   11-350
analysis/cli/forecasting.py                  133    133  0.00%   11-266
analysis/cli/main.py                          28     28  0.00%   19-113
analysis/cli/patrol.py                       221    221  0.00%   12-430
analysis/cli/policy.py                       165    165  0.00%   12-357
analysis/config.py                            10     10  0.00%   3-26
analysis/config/schemas/chief.py              20     20  0.00%   3-49
analysis/config/schemas/forecasting.py        15     15  0.00%   3-40
analysis/config/schemas/patrol.py             32     32  0.00%   3-77
analysis/config/schemas/policy.py             30     30  0.00%   3-76
analysis/config/settings.py                   30     30  0.00%   3-94
analysis/config_loader.py                     56     56  0.00%   3-108
analysis/data/cache.py                        15     15  0.00%   12-49
analysis/data/loading.py                      55     55  0.00%   19-218
analysis/data/preprocessing.py                25     25  0.00%   16-150
analysis/data/validation.py                   64     64  0.00%   18-230
analysis/event_utils.py                       66     66  0.00%   3-231
analysis/models/classification.py             70     70  0.00%   11-278
analysis/models/time_series.py                48     48  0.00%   11-181
analysis/models/validation.py                 60     60  0.00%   11-280
analysis/phase2_config_loader.py              70     70  0.00%   3-171
analysis/phase3_config_loader.py              31     31  0.00%   3-53
analysis/report_utils.py                      47     47  0.00%   1-95
analysis/spatial_utils.py                     75     75  0.00%   10-343
analysis/utils/classification.py              13     13  0.00%   18-67
analysis/utils/spatial.py                     69     69  0.00%   18-372
analysis/utils/temporal.py                    14     14  0.00%   20-75
analysis/validate_phase3.py                  106    106  0.00%   3-196
analysis/visualization/forecast_plots.py     146    146  0.00%   11-500
analysis/visualization/helpers.py              9      9  0.00%   16-61
analysis/visualization/plots.py               38     38  0.00%   17-167
analysis/visualization/style.py               19     19  0.00%   17-54
api/main.py                                   61     61  0.00%   3-153
api/routers/forecasting.py                    11     11  0.00%   3-21
api/routers/metadata.py                        8      8  0.00%   3-16
api/routers/policy.py                         17     17  0.00%   3-31
api/routers/questions.py                     163    163  0.00%   3-249
api/routers/spatial.py                        17     17  0.00%   3-31
api/routers/trends.py                         30     30  0.00%   3-48
pipeline/export_data.py                      197    197  0.00%   3-372
pipeline/refresh_data.py                      52     52  0.00%   3-110
------------------------------------------------------------------------
TOTAL                                       2528   2528  0.00%
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
Coverage JSON written to file .planning/phases/10-test-infrastructure-&-baseline/coverage-baseline.json
FAIL Required test coverage of 95.0% not reached. Total coverage: 0.00%
=========================== short test summary info ============================
ERROR tests/integration/test_migration_verification.py
ERROR tests/test_api_endpoints.py
ERROR tests/test_classification.py
ERROR tests/test_cli_chief.py
ERROR tests/test_cli_forecasting.py
ERROR tests/test_cli_patrol.py
ERROR tests/test_cli_policy.py
ERROR tests/test_data_loading.py
ERROR tests/test_data_preprocessing.py
ERROR tests/test_data_validation.py
ERROR tests/test_integration_output_verification.py
ERROR tests/test_phase2_spatial.py
ERROR tests/test_pipeline_export.py
ERROR tests/test_temporal.py
FAILED tests/integration/test_phase3_devx_reliability.py::test_profile_validation_script_passes
FAILED tests/integration/test_phase6_preset_regression_guardrails.py::test_preset_04_traceability_maps_to_phase_6
============= 2 failed, 29 passed, 9 warnings, 14 errors in 4.17s ==============
