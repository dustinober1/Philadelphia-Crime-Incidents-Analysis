---
phase: 02-data-presentation
plan: "05"
type: execute
wave: 3
depends_on:
  - "02-01"
  - "02-02"
  - "02-03"
  - "02-04"
files_modified:
  - web/src/app/data/page.tsx
  - web/src/app/data/layout.tsx
  - web/src/app/data/loading.tsx
  - web/src/components/Navbar.tsx
  - web/src/components/Footer.tsx
  - web/src/lib/navigation.ts
autonomous: false
must_haves:
  truths:
    - User can access Data & Transparency page from navigation and footer
    - Page displays all available data downloads in one location
    - Page includes data source citations with URLs
    - Page explains methodology and data limitations clearly
  artifacts:
    - path: web/src/app/data/page.tsx
      provides: Data & Transparency page with downloads and citations
      min_lines: 80
    - path: web/src/app/data/layout.tsx
      provides: Layout wrapper for data section
      contains: "export default function DataLayout"
    - path: web/src/app/data/loading.tsx
      provides: Loading skeleton for data page
      min_lines: 15
    - path: web/src/lib/navigation.ts
      contains: "data"
  key_links:
    - from: web/src/components/Navbar.tsx
      to: web/src/app/data/page.tsx
      via: Navigation route entry
      pattern: "href: /data"
    - from: web/src/components/Footer.tsx
      to: web/src/app/data/page.tsx
      via: Footer link
      pattern: "Data"
    - from: web/src/app/data/page.tsx
      to: web/src/components/DownloadButton.tsx
      via: Import for download functionality
      pattern: "DownloadButton"
    - from: web/src/app/data/page.tsx
      to: web/src/lib/csv-export.ts
      via: Direct import for client-side export of combined datasets
      pattern: "csv-export"
---

<objective>
Create a dedicated Data & Transparency page with centralized downloads, source citations, and methodology information.

Purpose: Provide a single location for users to access all data downloads, understand data sources, and review methodology and limitations.
Output: Data & Transparency page with download sections, source citations, and methodology explanation.
</objective>

<execution_context>
@.claude/get-shit-done/workflows/execute-plan.md
@.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/02-data-presentation-/02-CONTEXT.md
@web/src/lib/navigation.ts
@web/src/components/Navbar.tsx
@web/src/components/Footer.tsx
@web/src/app/about/page.tsx
@web/src/components/DownloadButton.tsx
@web/src/lib/csv-export.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add data route to navigation configuration</name>
  <files>web/src/lib/navigation.ts
  web/src/components/Navbar.tsx
  web/src/components/Footer.tsx</files>
  <action>Add "Data & Transparency" route to the navigation system:

1. In `navigation.ts`: Add route entry with `path: "/data"`, `label: "Data & Transparency"`, `icon: "Database"` (or appropriate lucide icon)

2. Update Navbar component to include the new route in the navigation menu (add to dropdown or main nav as appropriate)

3. Update Footer component to include a "Data" link alongside existing footer links

Use existing navigation patterns from routes.ts (if exists) or follow current nav structure.

DO NOT: Change existing navigation structure dramatically; follow established patterns.</action>
  <verify>cd web && npm run lint && npm run typecheck</verify>
  <done>Data route is accessible from navigation menu and footer.</done>
</task>

<task type="auto">
  <name>Task 2: Create Data page layout and loading skeleton</name>
  <files>web/src/app/data/layout.tsx
  web/src/app/data/loading.tsx</files>
  <action>Create the data page structure:

1. `layout.tsx`: Standard layout export with section title "Data & Transparency"

2. `loading.tsx`: Structured loading skeleton matching the page structure:
   - Hero section skeleton
   - Download section card skeletons
   - Citation section skeleton

Follow the same skeleton pattern used in about/loading.tsx (use pulsing animation for better UX).

DO NOT: Add complex animations or suspense boundaries.</action>
  <verify>cd web && npm run build</verify>
  <done>Data page has proper layout structure and loading state.</done>
</task>

<task type="auto">
  <name>Task 3: Create Data & Transparency page with downloads and citations</name>
  <files>web/src/app/data/page.tsx</files>
  <action>Create a comprehensive Data & Transparency page with sections:

1. **Hero Section**: Title, description explaining this is the central location for data downloads

2. **Data Downloads Section**: Grouped downloads with DownloadButton components:
   - "Trend Data": Annual, Monthly, COVID, Seasonality, Robbery Heatmap
   - "Spatial Data": Districts, Tracts, Hotspots, Corridors (GeoJSON format note)
   - "Policy Data": Retail Theft, Vehicle Crimes, Composition, Events

3. **Data Sources Section**: Citations with:
   - Philadelphia Police Department (OpenDataPhilly URL)
   - U.S. Census Bureau (census.gov URL)
   - Brief description of data sources

4. **Methodology Section**: Brief overview of:
   - Data processing pipeline
   - Aggregation methods
   - Temporal/spatial analysis techniques

5. **Limitations Section**: Key limitations:
   - Reporting practice changes over time
   - Geocoding coverage variability
   - No causal claims from correlations

Use SWR to fetch all datasets on mount. Display DownloadButton components for each dataset. Use proper prose styling (prose max-w-4xl prose-slate).

Reuse content from about page where appropriate (sources, methodology).

DO NOT: Duplicate the entire About page; keep this focused on data downloads and citations.</action>
  <verify>cd web && npm run build</verify>
  <done>Data page displays all download options with proper citations and methodology information.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Data & Transparency page with centralized downloads and source citations</what-built>
  <how-to-verify>
    1. Start dev server: `cd web && npm run dev`
    2. Visit http://localhost:3000/data
    3. Verify page loads with all sections visible
    4. Test download buttons for each data category (trends, spatial, policy)
    5. Verify source citations are displayed with proper URLs
    6. Check mobile responsiveness (390px, 768px widths)
    7. Confirm navigation menu and footer link to /data
  </how-to-verify>
  <resume-signal>Type "approved" if Data & Transparency page works correctly, or describe any issues.</resume-signal>
</task>

</tasks>

<verification>
- Run `cd web && npm run lint`
- Run `cd web && npm run typecheck`
- Run `cd web && npm run build`
- Verify navigation menu includes "Data & Transparency" option
- Verify footer includes "Data" link
- Manual QA: Visit /data, test downloads, verify citations are displayed
</verification>

<success_criteria>
- DATA-05 complete: Full dataset downloads available from centralized page
- DATA-06 complete: Data sources cited with transparency about origins (names and URLs)
- Page is accessible via navigation and footer
- Downloads work correctly and include proper metadata
- Page is responsive and readable on all device sizes
</success_criteria>

<output>
After completion, create `.planning/phases/02-data-presentation-/02-05-SUMMARY.md`.
</output>
