---
phase: 01-data-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/config.py
  - notebooks/00_environment_setup.ipynb
  - environment.yml
  - requirements.txt
autonomous: true
must_haves:
  truths:
    - "Project directory structure exists"
    - "Configuration variables are centralized"
    - "Environment is reproducible"
  artifacts:
    - path: "scripts/config.py"
      provides: "Central configuration"
    - path: "notebooks/00_environment_setup.ipynb"
      provides: "Environment verification"
    - path: "data/processed/"
      provides: "Output directory"
  key_links:
    - from: "notebooks/00_environment_setup.ipynb"
      to: "scripts/config.py"
      via: "import"
---

<objective>
Initialize the analysis environment and directory structure.

Purpose: Ensure consistent paths, libraries, and configuration across all subsequent notebooks.
Output: Validated directory structure, config script, and environment setup notebook.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/research/01-stack-research.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Setup Project Structure & Config</name>
  <files>scripts/config.py, environment.yml, requirements.txt</files>
  <action>
    1. Create standard directory structure:
       - notebooks/
       - scripts/
       - data/raw/ (ensure exists)
       - data/processed/
       - output/figures/
       - output/tables/
       - reports/
    
    2. Update `requirements.txt` and create `environment.yml` with pinned versions for:
       - pandas>=2.2, geopandas>=0.14
       - pandera>=0.20, statsmodels>=0.14
       - plotly, folium, matplotlib, seaborn, pyarrow, scipy
    
    3. Create `scripts/config.py`:
       - Define absolute paths using `pathlib`
       - Define coordinate reference systems (CRS): EPSG:4326 (lat/lon) and EPSG:2272 (Philly)
       - Define visual style settings (color palettes)
       - Define column name mapping constants
  </action>
  <verify>
    ls -R notebooks scripts data output reports
    cat scripts/config.py
  </verify>
  <done>Directories exist; config.py imports without error; requirements defined.</done>
</task>

<task type="auto">
  <name>Task 2: Create Environment Setup Notebook</name>
  <files>notebooks/00_environment_setup.ipynb</files>
  <action>
    Create `notebooks/00_environment_setup.ipynb` that:
    1. Imports all required libraries (pandas, geopandas, pandera, etc.)
    2. Prints version numbers for verification
    3. Imports `scripts.config` to verify path setup
    4. Checks for existence of raw data file (log warning if missing, don't fail)
    5. Sets random seeds for reproducibility
  </action>
  <verify>
    # Execute the notebook from command line
    jupyter nbconvert --to notebook --execute notebooks/00_environment_setup.ipynb --output notebooks/00_environment_setup_executed.ipynb
  </verify>
  <done>Notebook executes successfully (exit code 0) and creates executed output.</done>
</task>

</tasks>

<verification>
Verify config is importable and environment handles all dependencies.
</verification>

<success_criteria>
- Directory structure matches standard layout
- config.py encapsulates paths and constants
- Notebook 00 runs without import errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-foundation/01-01-SUMMARY.md`
</output>
