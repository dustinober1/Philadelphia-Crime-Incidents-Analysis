---
phase: 04-dashboard-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - dashboard/__init__.py
  - dashboard/app.py
  - dashboard/config.py
autonomous: true

must_haves:
  truths:
    - "Streamlit dashboard project structure exists with dashboard/ directory"
    - "app.py entry point configures page title, layout, and basic navigation"
    - "config.py defines dashboard-specific constants (page names, filter defaults)"
    - "Dashboard imports work correctly (importlib for hyphenated analysis modules)"
  artifacts:
    - path: "dashboard/__init__.py"
      provides: "Package initialization"
      min_lines: 5
    - path: "dashboard/app.py"
      provides: "Main entry point"
      min_lines: 50
      exports: ["main"]
    - path: "dashboard/config.py"
      provides: "Dashboard configuration"
      min_lines: 30
      exports: ["PAGE_NAMES", "FILTER_DEFAULTS", "CACHE_CONFIG"]
  key_links:
    - from: "dashboard/app.py"
      to: "analysis/config.py"
      via: "Import CRIME_DATA_PATH, STAT_CONFIG"
      pattern: "from analysis\\.config import"
    - from: "dashboard/config.py"
      to: "analysis/config.py"
      via: "Reuse existing configuration constants"
      pattern: "from analysis\\.config import"
---

<objective>
Create Streamlit dashboard project structure with entry point, configuration, and package initialization.

Purpose: Establish the foundation for the interactive dashboard by setting up the directory structure, main app entry point, and configuration constants. This plan creates the skeleton that subsequent plans will build upon.

Output: Working Streamlit app that launches with title and basic layout, ready for filter and page implementation.
</objective>

<execution_context>
@/Users/dustinober/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dustinober/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/04-dashboard-foundation/04-CONTEXT.md
@.planning/phases/04-dashboard-foundation/04-RESEARCH.md

@analysis/config.py
@analysis/utils.py
@analysis/temporal_analysis.py
</context>

<tasks>

<task type="auto">
  <name>Create dashboard package structure and configuration</name>
  <files>dashboard/__init__.py, dashboard/config.py, dashboard/app.py</files>
  <action>
Create the dashboard directory structure and files:

1. **CREATE dashboard/__init__.py**:
```python
"""
Philadelphia Crime Incidents Dashboard.

Interactive Streamlit dashboard for exploring Philadelphia crime patterns
with temporal, geographic, and crime type filters.
"""

__version__ = "1.0.0"
```

2. **CREATE dashboard/config.py**:
```python
"""
Dashboard-specific configuration constants.
"""

from analysis.config import STAT_CONFIG, CRIME_DATA_PATH

# Page/tab names
PAGE_NAMES = {
    "overview": "Overview/Stats",
    "temporal": "Temporal Trends",
    "spatial": "Spatial Maps",
    "correlations": "Correlations",
    "advanced": "Advanced Temporal",
}

ALL_TABS = list(PAGE_NAMES.values())

# Filter defaults
FILTER_DEFAULTS = {
    # Date range (full dataset excluding incomplete 2026)
    "start_date": "2006-01-01",
    "end_date": "2025-12-31",
    # Police districts (all districts 1-23)
    "districts": list(range(1, 24)),
    # Crime categories
    "crime_categories": ["Violent", "Property", "Other"],
    # Include 2026 data (incomplete year)
    "include_2026": False,
}

# Cache configuration for data loading
CACHE_CONFIG = {
    "data_ttl": 3600,  # 1 hour
    "data_max_entries": 10,
    "filter_ttl": 1800,  # 30 minutes
    "filter_max_entries": 50,
}

# Dashboard display settings
DISPLAY_CONFIG = {
    "title": "Philadelphia Crime Incidents Dashboard",
    "subtitle": "Exploratory Data Analysis (2006-2025)",
    "layout": "wide",  # Streamlit page layout
}
```

3. **CREATE dashboard/app.py**:
```python
"""
Philadelphia Crime Incidents Dashboard - Main Entry Point.

Run with: streamlit run dashboard/app.py
"""

import streamlit as st
from pathlib import Path

from dashboard.config import DISPLAY_CONFIG, PAGE_NAMES

# Configure page
st.set_page_config(
    page_title="Philadelphia Crime Dashboard",
    page_icon=":police_car:",
    layout=DISPLAY_CONFIG["layout"],
    initial_sidebar_state="expanded",
)

# Custom CSS for professional appearance
def _load_custom_css():
    st.markdown("""
    <style>
    .main-header {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1f77b4;
        margin-bottom: 0.5rem;
    }
    .sub-header {
        font-size: 1.2rem;
        color: #666;
        margin-bottom: 2rem;
    }
    .metric-card {
        background: #f0f2f6;
        padding: 1rem;
        border-radius: 0.5rem;
        margin: 0.5rem 0;
    }
    </style>
    """, unsafe_allow_html=True)

def main():
    """Main dashboard entry point."""
    _load_custom_css()

    # Title
    st.title(DISPLAY_CONFIG["title"])
    st.markdown(f"<p class='sub-header'>{DISPLAY_CONFIG['subtitle']}</p>", unsafe_allow_html=True)

    # Sidebar info (placeholder for filters in later plans)
    with st.sidebar:
        st.header(":wrench: Filters")
        st.info("Filter controls will be added in subsequent plans (04-03, 04-04, 04-05)")
        st.markdown("---")
        st.caption("Dashboard v1.0 | Philadelphia Crime EDA")

    # Placeholder for tabs (will be implemented in 04-06)
    st.header("Dashboard Under Construction")
    st.info("This dashboard is being built incrementally. See Phase 4 plans:")
    st.markdown("""
    - Plan 04-01: Project structure and configuration (this plan)
    - Plan 04-02: Data loading with caching
    - Plan 04-03: Time range filter controls
    - Plan 04-04: Geographic filter controls
    - Plan 04-05: Crime type filter controls
    - Plan 04-06: Main overview page with tabs and visualizations
    """)

    # Quick stats placeholder
    st.subheader("Quick Stats (Placeholder)")
    col1, col2, col3 = st.columns(3)
    with col1:
        st.metric("Total Records", "3.5M", "2006-2025")
    with col2:
        st.metric("Police Districts", "23", "Philadelphia")
    with col3:
        st.metric("Crime Types", "32", "UCR categories")

if __name__ == "__main__":
    main()
```

4. **VERIFY the app runs**:
```bash
cd "/Users/dustinober/Projects/Crime Incidents Philadelphia" && python -m streamlit run dashboard/app.py --server.headless true --server.port 8501 &
sleep 5
curl -s http://localhost:8501 | grep -q "Philadelphia Crime Incidents Dashboard"
pkill -f "streamlit run dashboard/app.py"
```

Key implementation notes:
- Follow RESEARCH.md patterns: @st.cache_data for data loading, st.tabs for organization
- Use analysis/config.py imports for CRIME_DATA_PATH, STAT_CONFIG (no duplication)
- Layout structure: sidebar + main content area (CONTEXT.md decision)
- Default filters: full dataset (2006-2025), all districts, all crime categories
- Page config set once at top of app.py (anti-pattern from RESEARCH.md)
</action>
  <verify>
python -c "from dashboard.config import PAGE_NAMES, FILTER_DEFAULTS, CACHE_CONFIG; print('Config loaded:', len(PAGE_NAMES), 'pages')" && python -c "import dashboard.app; print('App module loads successfully')"
</verify>
  <done>
dashboard/ directory exists with __init__.py, config.py, and app.py
- app.py contains main() function with st.set_page_config and basic layout
- config.py defines PAGE_NAMES dict with 5 tabs, FILTER_DEFAULTS, CACHE_CONFIG
- Import from analysis.config works without errors
- Streamlit launches without import errors (check with: streamlit run dashboard/app.py --server.headless true)
</done>
</task>

</tasks>

<verification>
After completion:
1. Verify dashboard/ directory structure: `ls -la dashboard/` shows __init__.py, config.py, app.py
2. Verify imports work: `python -c "from dashboard import config, app"`
3. Verify Streamlit can run: `streamlit run dashboard/app.py --server.headless true` (should launch without errors)
4. Verify config values: PAGE_NAMES has 5 entries, FILTER_DEFAULTS has expected keys
</verification>

<success_criteria>
Streamlit app launches successfully with title "Philadelphia Crime Incidents Dashboard", sidebar exists, and placeholder content displays. Config module provides all constants needed by subsequent plans (PAGE_NAMES, FILTER_DEFAULTS, CACHE_CONFIG, DISPLAY_CONFIG).
</success_criteria>

<output>
After completion, create `.planning/phases/04-dashboard-foundation/04-01-SUMMARY.md`
</output>
